<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.6.3" />
<title>botball.core.components.devices.Motor API documentation</title>
<meta name="description" content="" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase;cursor:pointer}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>botball.core.components.devices.Motor</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>Source code</summary>
<pre><code class="python">from botball import libwallaby
from ..Movable import Movable
from ..Direction import Direction
from ...helpers.scale import scale 


class Motor(Movable): 
    &#34;&#34;&#34;
    Represents a motor connected to the robot.
    &#34;&#34;&#34; 

    def __copy__(self):
        return Motor(self.port, self.speed)

    def move(self, direction: Direction, mm: float, block: bool = True, sleep: bool = True):
        &#34;&#34;&#34; 
        Moves the motor.

        - `direction`: The direction in which to move the motor.

        - `mm`: The distance to move the motor in mm.

        - `block`: Whether to block the thread until finished. If you don&#39;t
        block the thread, you are responsible for calling `off()` on the
        motor!

        - `sleep`: Whether to sleep for `Motor.default_sleep_time()` ms after
        the motor finishes driving. You should probably keep this set to
        `True` unless you sleep somewhere else in the program, because not
        sleeping will cause the motor to sometimes finish too early and make
        future movements unreliable (not fun to debug!). If this is set to
        `False`, then the value of `mm` is ignored.
        &#34;&#34;&#34;
        velocity = int(self._velocity() * direction.multiplier())

        libwallaby.move_at_velocity(self.port, velocity)

        if block:
            distance_ticks = self._mm_to_ticks(mm)
            ms_to_sleep = int(self._ticks_to_ms(distance_ticks))

            libwallaby.msleep(ms_to_sleep)
            libwallaby.off(self.port) 

        if sleep:
            libwallaby.msleep(self.default_sleep_time)

    # - Constants

    motor_ticks_per_mm: float = 10 / 1.13
    &#34;&#34;&#34;
    The number of motor &#34;ticks&#34; (`libwallaby`&#39;s internal motor unit) in one
    millimeter.

    If this value is inaccurate for your robot, you can change it. Do so as
    early in your program as possible (eg. before you create/initialize any
    components.)
    &#34;&#34;&#34;

    motor_ticks_per_second: float = 818
    &#34;&#34;&#34;
    The number of motor &#34;ticks&#34; (`libwallaby`&#39;s internal motor unit) a
    motor will travel at full speed in one second.

    If this value is inaccurate for your robot, you can change it. Do so as
    early in your program as possible (eg. before you create/initialize any
    components.)
    &#34;&#34;&#34;

    default_sleep_time: int = 300 
    &#34;&#34;&#34;
    The amount of time (in milliseconds) to allow the motors to sleep for in 
    between movements. This allows the motor a bit of time to stop moving before
    the next motor is sent.

    If this value is inaccurate for your robot, you can change it. Do so as
    early in your program as possible (eg. before you create/initialize any
    components.)
    &#34;&#34;&#34;

    # - Calculation

    def _mm_to_ticks(self, mm: float) -&gt; float:
        return self.motor_ticks_per_mm * mm 
    
    def _velocity(self) -&gt; float:
        return scale(self.speed, 0, 1, 0, self.motor_ticks_per_second)
    
    def _ticks_to_ms(self, ticks: float) -&gt; float:
        return abs(ticks * self.motor_ticks_per_second / self._velocity())</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="botball.core.components.devices.Motor.Motor"><code class="flex name class">
<span>class <span class="ident">Motor</span></span>
<span>(</span><span>port: int, speed: float)</span>
</code></dt>
<dd>
<section class="desc"><p>Represents a motor connected to the robot.</p></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">class Motor(Movable): 
    &#34;&#34;&#34;
    Represents a motor connected to the robot.
    &#34;&#34;&#34; 

    def __copy__(self):
        return Motor(self.port, self.speed)

    def move(self, direction: Direction, mm: float, block: bool = True, sleep: bool = True):
        &#34;&#34;&#34; 
        Moves the motor.

        - `direction`: The direction in which to move the motor.

        - `mm`: The distance to move the motor in mm.

        - `block`: Whether to block the thread until finished. If you don&#39;t
        block the thread, you are responsible for calling `off()` on the
        motor!

        - `sleep`: Whether to sleep for `Motor.default_sleep_time()` ms after
        the motor finishes driving. You should probably keep this set to
        `True` unless you sleep somewhere else in the program, because not
        sleeping will cause the motor to sometimes finish too early and make
        future movements unreliable (not fun to debug!). If this is set to
        `False`, then the value of `mm` is ignored.
        &#34;&#34;&#34;
        velocity = int(self._velocity() * direction.multiplier())

        libwallaby.move_at_velocity(self.port, velocity)

        if block:
            distance_ticks = self._mm_to_ticks(mm)
            ms_to_sleep = int(self._ticks_to_ms(distance_ticks))

            libwallaby.msleep(ms_to_sleep)
            libwallaby.off(self.port) 

        if sleep:
            libwallaby.msleep(self.default_sleep_time)

    # - Constants

    motor_ticks_per_mm: float = 10 / 1.13
    &#34;&#34;&#34;
    The number of motor &#34;ticks&#34; (`libwallaby`&#39;s internal motor unit) in one
    millimeter.

    If this value is inaccurate for your robot, you can change it. Do so as
    early in your program as possible (eg. before you create/initialize any
    components.)
    &#34;&#34;&#34;

    motor_ticks_per_second: float = 818
    &#34;&#34;&#34;
    The number of motor &#34;ticks&#34; (`libwallaby`&#39;s internal motor unit) a
    motor will travel at full speed in one second.

    If this value is inaccurate for your robot, you can change it. Do so as
    early in your program as possible (eg. before you create/initialize any
    components.)
    &#34;&#34;&#34;

    default_sleep_time: int = 300 
    &#34;&#34;&#34;
    The amount of time (in milliseconds) to allow the motors to sleep for in 
    between movements. This allows the motor a bit of time to stop moving before
    the next motor is sent.

    If this value is inaccurate for your robot, you can change it. Do so as
    early in your program as possible (eg. before you create/initialize any
    components.)
    &#34;&#34;&#34;

    # - Calculation

    def _mm_to_ticks(self, mm: float) -&gt; float:
        return self.motor_ticks_per_mm * mm 
    
    def _velocity(self) -&gt; float:
        return scale(self.speed, 0, 1, 0, self.motor_ticks_per_second)
    
    def _ticks_to_ms(self, ticks: float) -&gt; float:
        return abs(ticks * self.motor_ticks_per_second / self._velocity())</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="botball.core.components.Movable.Movable" href="../Movable.html#botball.core.components.Movable.Movable">Movable</a></li>
<li><a title="botball.core.components.Component.Component" href="../Component.html#botball.core.components.Component.Component">Component</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="botball.core.components.devices.Motor.Motor.default_sleep_time"><code class="name">var <span class="ident">default_sleep_time</span></code></dt>
<dd>
<section class="desc"><p>The amount of time (in milliseconds) to allow the motors to sleep for in
between movements. This allows the motor a bit of time to stop moving before
the next motor is sent.</p>
<p>If this value is inaccurate for your robot, you can change it. Do so as
early in your program as possible (eg. before you create/initialize any
components.)</p></section>
</dd>
<dt id="botball.core.components.devices.Motor.Motor.motor_ticks_per_mm"><code class="name">var <span class="ident">motor_ticks_per_mm</span></code></dt>
<dd>
<section class="desc"><p>The number of motor "ticks" (<code>libwallaby</code>'s internal motor unit) in one
millimeter.</p>
<p>If this value is inaccurate for your robot, you can change it. Do so as
early in your program as possible (eg. before you create/initialize any
components.)</p></section>
</dd>
<dt id="botball.core.components.devices.Motor.Motor.motor_ticks_per_second"><code class="name">var <span class="ident">motor_ticks_per_second</span></code></dt>
<dd>
<section class="desc"><p>The number of motor "ticks" (<code>libwallaby</code>'s internal motor unit) a
motor will travel at full speed in one second.</p>
<p>If this value is inaccurate for your robot, you can change it. Do so as
early in your program as possible (eg. before you create/initialize any
components.)</p></section>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="botball.core.components.devices.Motor.Motor.move"><code class="name flex">
<span>def <span class="ident">move</span></span>(<span>self, direction: <a title="botball.core.components.Direction.Direction" href="../Direction.html#botball.core.components.Direction.Direction">Direction</a>, mm: float, block: bool = True, sleep: bool = True)</span>
</code></dt>
<dd>
<section class="desc"><p>Moves the motor.</p>
<ul>
<li>
<p><code>direction</code>: The direction in which to move the motor.</p>
</li>
<li>
<p><code>mm</code>: The distance to move the motor in mm.</p>
</li>
<li>
<p><code>block</code>: Whether to block the thread until finished. If you don't
block the thread, you are responsible for calling <code>off()</code> on the
motor!</p>
</li>
<li>
<p><code>sleep</code>: Whether to sleep for <a title="botball.core.components.devices.Motor.Motor.default_sleep_time" href="#botball.core.components.devices.Motor.Motor.default_sleep_time"><code>Motor.default_sleep_time</code></a> ms after
the motor finishes driving. You should probably keep this set to
<code>True</code> unless you sleep somewhere else in the program, because not
sleeping will cause the motor to sometimes finish too early and make
future movements unreliable (not fun to debug!). If this is set to
<code>False</code>, then the value of <code>mm</code> is ignored.</p>
</li>
</ul></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">def move(self, direction: Direction, mm: float, block: bool = True, sleep: bool = True):
    &#34;&#34;&#34; 
    Moves the motor.

    - `direction`: The direction in which to move the motor.

    - `mm`: The distance to move the motor in mm.

    - `block`: Whether to block the thread until finished. If you don&#39;t
    block the thread, you are responsible for calling `off()` on the
    motor!

    - `sleep`: Whether to sleep for `Motor.default_sleep_time()` ms after
    the motor finishes driving. You should probably keep this set to
    `True` unless you sleep somewhere else in the program, because not
    sleeping will cause the motor to sometimes finish too early and make
    future movements unreliable (not fun to debug!). If this is set to
    `False`, then the value of `mm` is ignored.
    &#34;&#34;&#34;
    velocity = int(self._velocity() * direction.multiplier())

    libwallaby.move_at_velocity(self.port, velocity)

    if block:
        distance_ticks = self._mm_to_ticks(mm)
        ms_to_sleep = int(self._ticks_to_ms(distance_ticks))

        libwallaby.msleep(ms_to_sleep)
        libwallaby.off(self.port) 

    if sleep:
        libwallaby.msleep(self.default_sleep_time)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="botball.core.components.Movable.Movable" href="../Movable.html#botball.core.components.Movable.Movable">Movable</a></b></code>:
<ul class="hlist">
<li><code><a title="botball.core.components.Movable.Movable.port" href="../Component.html#botball.core.components.Component.Component.port">port</a></code></li>
<li><code><a title="botball.core.components.Movable.Movable.speed" href="../Movable.html#botball.core.components.Movable.Movable.speed">speed</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="botball.core.components.devices" href="index.html">botball.core.components.devices</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="botball.core.components.devices.Motor.Motor" href="#botball.core.components.devices.Motor.Motor">Motor</a></code></h4>
<ul class="">
<li><code><a title="botball.core.components.devices.Motor.Motor.default_sleep_time" href="#botball.core.components.devices.Motor.Motor.default_sleep_time">default_sleep_time</a></code></li>
<li><code><a title="botball.core.components.devices.Motor.Motor.motor_ticks_per_mm" href="#botball.core.components.devices.Motor.Motor.motor_ticks_per_mm">motor_ticks_per_mm</a></code></li>
<li><code><a title="botball.core.components.devices.Motor.Motor.motor_ticks_per_second" href="#botball.core.components.devices.Motor.Motor.motor_ticks_per_second">motor_ticks_per_second</a></code></li>
<li><code><a title="botball.core.components.devices.Motor.Motor.move" href="#botball.core.components.devices.Motor.Motor.move">move</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.6.3</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>